<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jackfolio</title>
<link rel="stylesheet" href="style.css">
<style>
  /* Lightbox styling */
  .lightbox {
    display: none;
    position: fixed;
    z-index: 1000;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
  }

  .lightbox img, .lightbox video {
    max-width: 90%;
    max-height: 80%;
    border-radius: 8px;
  }

  /* Close button */
  .close-btn {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 2rem;
    color: white;
    cursor: pointer;
    font-weight: bold;
    user-select: none;
    z-index: 1001;
  }

  .close-btn:hover {
    color: #aaa;
  }

  /* Gallery video styling */
  .gallery video {
    margin: 5px;
    border-radius: 8px;
    max-width: 100%; /* scale down if needed */
    height: auto;    /* maintain aspect ratio */
  }
</style>
</head>
<body>

<header>
  <h1>Jackfolio</h1>
  <nav>
    <a href="index.html">Gallery</a>
    <a href="sketch.html">Sketch</a>
    <a href="personal.html">Personal</a>
    <a href="about.html">About</a>
  </nav>
</header>

<div class="gallery" id="gallery"></div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <span class="close-btn" id="close-btn">&times;</span>
</div>

<footer>
  <p>© Jack 2025</p>
  <p>
    <a href="#">Twitter</a> |
    <a href="#">Instagram</a> |
    <a href="#">Facebook</a>
  </p>
</footer>

<script>
  const gallery = document.getElementById("gallery");
  const lightbox = document.getElementById("lightbox");
  const closeBtn = document.getElementById("close-btn");

  const apiURL = "https://api.github.com/repos/jack0fcodes/Folio/contents/images";

  fetch(apiURL)
    .then(res => res.json())
    .then(files => {
      let imageFiles = files.filter(file => file.name.match(/\.(png|jpg|jpeg|gif|mov|mp4)$/i));

      imageFiles.sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' }));

      imageFiles.forEach((file, index) => {
        if (file.name.match(/\.mp4$/i)) {
          const video = document.createElement("video");
          video.src = file.download_url;
          video.loop = true;
          video.muted = true;
          video.autoplay = true;
          video.playsInline = true;
          video.style.cursor = "pointer";
          video.style.maxWidth = "100%"; // natural size but scale down if needed
          video.style.height = "auto";
          gallery.appendChild(video);

          video.addEventListener("click", () => {
            openLightbox(file.download_url, "video");
          });

        } else {
          const img = document.createElement("img");
          img.src = file.download_url;
          img.alt = "Artwork " + (index + 1);
          gallery.appendChild(img);

          img.addEventListener("click", () => {
            openLightbox(file.download_url, "image");
          });
        }
      });
    })
    .catch(err => {
      console.error("Error fetching images:", err);
      gallery.innerHTML = "<p>⚠️ Could not load images.</p>";
    });

  function openLightbox(src, type) {
    lightbox.innerHTML = '<span class="close-btn" id="close-btn">&times;</span>'; // reset content

    if (type === "image") {
      const img = document.createElement("img");
      img.src = src;
      lightbox.appendChild(img);
    } else if (type === "video") {
      const video = document.createElement("video");
      video.src = src;
      video.autoplay = true;
      video.loop = true;
      video.muted = true;
      video.playsInline = true;
      video.style.maxWidth = "90%";
      video.style.maxHeight = "80%";
      lightbox.appendChild(video);
    }

    const closeBtnInner = document.getElementById("close-btn");
    closeBtnInner.addEventListener("click", () => {
      lightbox.style.display = "none";
      lightbox.innerHTML = "";
    });

    lightbox.style.display = "flex";
  }

  // close on outside click
  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) {
      lightbox.style.display = "none";
      lightbox.innerHTML = "";
    }
  });
</script>
  

</body>
</html>
